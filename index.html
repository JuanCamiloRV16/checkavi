<!doctype html>
<html lang="es">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Bootstrap CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<!-- JavaScript & JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<!-- jsPDF -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>

	<title>CheckAvi</title>
</head>

<body>
	<div id="contentToPrint">
		<div class="container-fluid p-5 bg-primary text-white text-center">
			<div class="jumbotron">
				<h2>CheckAvi - Checklist de Accesibilidad en Videojuegos</h2>
				<br>
				<p>Mediante esta lista de verificación puede identificar las características de accesibilidad que ya tiene o que le falta por incluir en un videojuego</p>
			</div>
		</div>
		<br>
		<br>
		<div class="row text-center">
			<div class="col-sm-12">
				<button onclick="exportPDF();" type="button" class="btn btn-primary">Descargar reporte</button>
			</div>
		</div>
		<div class="container mt-5">
			<div class="row justify-content-md-center">
				<div class="col-6">
					<div class="progress">
						<div id="bar" class="progress-bar progress-bar-striped active" role="progressbar"
							aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container mt-5">
			<div class="row justify-content-md-center">
				<div class="col-6">
					<div class="input-group mb-3">
						<span class="input-group-text" id="inputGroup-sizing-default">Nombre del videojuego:</span>
						<input type="text" class="form-control" aria-label="Sizing example input"
							aria-describedby="inputGroup-sizing-default">
					</div>
				</div>
			</div>
			<br>
			<div class="row justify-content-md-center">
				<div class="col-6">
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="12">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="No hay un nivel de sensibilidad para todos los jugadores. Por eso es importante tener la sensibilidad de los controles.">Sensibilidad ajustable / tolerancia al error</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="12">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="Utilizando lenguaje especifico puede causar que el jugador no entienda de las instrucciones para continuar con el videojuego. Por eso se recomienda usar lenguaje que es simple de seguir y términos que la mayoría de los jugadores puedan entender.">Uso de lenguaje simple</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="12">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="La repetición de mensajes o textos de un videojuego con útiles para textos que son difíciles de seguir.">Repetición de voz y/o textos</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="7">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="Los subtítulos son útiles para personas con discapacidades auditivas.">Subtítulos</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="12">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="Es útil tener la función de pausar la ejecución de un texto ya que estoy da más tiempo para leer instrucciones o diálogos del videojuego.">Pausa mientras el texto está siendo leído</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="7">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="Algunos jugadores tienen dificultad de mantener jugando por largos periodos de tiempo. Por eso es importante implementar puntos para guardar el juego.">Puntos de guardado</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="7">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="Las personas con varios tipos de discapacidades de aprendizaje requieren recibir recompensas explicitas visuales o auditivas como una motivación de mantener su motivación en el juego.">Uso explícito de recompensas visuales</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="12">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="La habilidad de modificar el grado de dificultad del videojuego.">Niveles de dificultad</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="12">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="tooltip" title="Muchas veces los jugadores no tienen la habilidad necesaria para superar los desafíos del videojuego. Por esta razón es importante que los desafíos de puedan repetir varias veces.">Repetición de desafíos</label>
					</div>
					<div class="form-check form-switch mb-3">
						<input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault" value="7">
						<label class="form-check-label" for="flexSwitchCheckDefault" data-toggle="Personas con baja visión usualmente tienen dificultad en apreciar las escenas de un videojuego. Por eso es útil poder modificar el contraste u otras características graficas de un videojuego.">Alto contraste</label>
					</div>
				</div>
			</div>
			<br>
		</div>
	</div>
	
	<script>
		$('input').on('click', function () {
			var emptyValue = 0;
			$('input:checked').each(function () {
				emptyValue += parseInt($(this).val());
				if(emptyValue == 100){
					$('.progress-bar').css('background-color', "#008000")
				} else {
					$('.progress-bar').css('background-color', "#162B4E")
				}
			});
			$('.progress-bar').css('width', emptyValue + '%').attr('aria-valuenow', emptyValue).html(emptyValue + '%');;
			
		});

		function exportPDF() {
			var pdf = new jsPDF('l', 'px'),source = $('#contentToPrint')[0];
			var canvasToImage = function (canvas) {
				var img = new Image();
				var dataURL = canvas.toDataURL('image/png');
				img.src = dataURL;
				return img;
			};
			var canvasShiftImage = function (oldCanvas, shiftAmt) {
				shiftAmt = parseInt(shiftAmt) || 0;
				if (!shiftAmt) {
					return oldCanvas;
				}
				var newCanvas = document.createElement('canvas');
				newCanvas.height = oldCanvas.height - shiftAmt;
				newCanvas.width = oldCanvas.width;
				var ctx = newCanvas.getContext('2d');
				var img = canvasToImage(oldCanvas);
				ctx.drawImage(img, 0, shiftAmt, img.width, img.height, 0, 0, img.width, img.height);
				return newCanvas;
			};
			var canvasToImageSuccess = function (canvas) {
				var pdf = new jsPDF('l', 'px'),
					pdfInternals = pdf.internal,
					pdfPageSize = pdfInternals.pageSize,
					pdfScaleFactor = pdfInternals.scaleFactor,
					pdfPageWidth = pdfPageSize.width,
					pdfPageHeight = pdfPageSize.height,
					totalPdfHeight = 0,
					htmlPageHeight = canvas.height,
					htmlScaleFactor = canvas.width / (pdfPageWidth * pdfScaleFactor),
					safetyNet = 0;
				while (totalPdfHeight < htmlPageHeight && safetyNet < 15) {
					var newCanvas = canvasShiftImage(canvas, totalPdfHeight);
					pdf.addImage(newCanvas, 'png', 0, 0, pdfPageWidth, 0, null, 'NONE');
					totalPdfHeight += (pdfPageHeight * pdfScaleFactor * htmlScaleFactor);
					if (totalPdfHeight < htmlPageHeight) {
						pdf.addPage();
					}
					safetyNet++;
				}
				pdf.save('reporte_accesibilidad.pdf');
			};
			html2canvas(source, {
				onrendered: function (canvas) {
					canvasToImageSuccess(canvas);
				}
			});
		}
	</script>

</body>

</html>
